# Expense Splitter API

A collaborative expense tracking and settlement backend built with **Spring Boot** and **PostgreSQL**.  
This project enables users to add shared expenses, automatically tracks participants, and calculates optimized settlements‚Äîjust like Splitwise.

---

## üöÄ Live Demo

- **Backend API:** [https://bhaveshbackendassignment.onrender.com](https://bhaveshbackendassignment.onrender.com)
- **Postman Collection:** [GitHub Gist Link](https://gist.github.com/bhaveshhptl/52c48310693e619d685aa6234bdacbfa)

---

## üì¶ Features

- **Expense Tracking:** Add, edit, delete, and list expenses with flexible split options (equal, percentage, exact).
- **People Management:** No separate "add person"‚Äîall names are auto-extracted from expenses.
- **Settlement Calculation:** Instantly see who owes whom, how much, and why, with minimized transactions.
- **Validation & Robustness:** Strong input validation, clear error messages, and proper HTTP status codes.
- **Public API:** Fully documented and tested via Postman.

---

## üõ†Ô∏è Tech Stack

- **Backend:** Java 17+, Spring Boot, Spring Data JPA
- **Database:** PostgreSQL (hosted on Render.com)
- **Deployment:** Docker, Render.com
- **Testing:** Postman

---

## üìù Setup Instructions

### 1. Clone & Build

``` 
git clone https://github.com/your-username/expense-splitter.git
cd expense-splitter
./mvnw clean package
```

### 2. Configure Database

- Create a PostgreSQL DB (e.g. on Render.com).
- Set environment variables:

```
DATABASE_URL=jdbc:postgresql://<host>:<port>/<dbname>
DB_USERNAME=<username>
DB_PASSWORD=<password>
```

### 3. Run Locally

```
./mvnw spring-boot:run
```
OR
```
java -jar target/expense-splitter-0.0.1-SNAPSHOT.jar
```


### 4. Database Schema

Tables are auto-generated by JPA.  

---

## üåê API Documentation

### Expense Management

| Method | Endpoint            | Description                  |
|--------|---------------------|------------------------------|
| GET    | `/expenses`         | List all expenses            |
| POST   | `/expenses`         | Add new expense              |
| PUT    | `/expenses/{id}`    | Update an expense            |
| DELETE | `/expenses/{id}`    | Delete an expense            |

### Settlement & People

| Method | Endpoint           | Description                        |
|--------|--------------------|------------------------------------|
| GET    | `/settlements`     | Get optimized settlement summary   |
| GET    | `/balances`        | Get each person's net balance      |
| GET    | `/people`          | List all participants              |

#### Example Payload (POST /expenses)

```json lines
{
"amount": 600.00,
"description": "Dinner",
"paidBy": "Shantanu",
"splitType": "EQUAL",
"shares": {
"Shantanu": 200.00,
"Sanket": 200.00,
"Om": 200.00
}
}
```


---

## üîé Settlement Calculation Logic

- **Equal Split:** Amount is divided equally among all participants.
- **Percentage Split:** Each participant pays their specified percentage (must total 100%).
- **Exact Split:** Each participant pays their specified amount (must sum to total).
- **Settlement Algorithm:** Uses a greedy approach to minimize the number of transactions required to settle all debts, ensuring clarity and fairness.

---

## üß™ Postman Collection

- [Expense Splitter API Collection (Gist)](https://gist.github.com/bhaveshhptl/52c48310693e619d685aa6234bdacbfa)
- **Usage:**
    - Import into Postman.
    - Switch the `base_url` variable to your deployed API.
    - All endpoints have working example requests and test data.
    - Each request includes a description and expected response.

---

## ‚ö†Ô∏è Known Limitations & Assumptions

- No authentication (public API).
- Person names are case-sensitive.
- No support for recurring expenses or groups.
- Floating-point precision is handled via `BigDecimal`, but minor rounding may occur.

---



